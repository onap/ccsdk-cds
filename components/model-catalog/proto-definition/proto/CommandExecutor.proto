syntax = "proto3";
import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";
option java_multiple_files = true;
package org.onap.ccsdk.cds.controllerblueprints.command.api;

message ExecutionInput {
    string requestId = 1;
    Identifiers identifiers = 2;
    ScriptType scriptType = 3;
    string command = 4;
    int32 timeOut = 5;
    google.protobuf.Struct properties = 6;
    google.protobuf.Timestamp timestamp = 7;
}

message PrepareEnvInput {
    string requestId = 1;
    ScriptType scriptType = 2;
    repeated string packages = 3;
    int32 timeOut = 4;
    google.protobuf.Struct properties = 5;
    google.protobuf.Timestamp timestamp = 7;
}

message Identifiers {
    string blueprintName = 1;
    string blueprintVersion = 2;
}

message ExecutionOutput {
    string requestId = 1;
    string response = 2;
    string status = 3;
    google.protobuf.Timestamp timestamp = 7;
}

enum ScriptType {
    PYTHON = 0;
    ANSIBLE = 1;
    KOTLIN = 2;
    SH = 3;
}

service CommandExecutorService {
    rpc prepareEnv (PrepareEnvInput) returns (ExecutionOutput);
    rpc executeCommand (ExecutionInput) returns (ExecutionOutput);
}

