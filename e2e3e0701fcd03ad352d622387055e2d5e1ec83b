{
  "comments": [
    {
      "key": {
        "uuid": "9939fd40_d40bab08",
        "filename": "ms/command-executor/src/main/docker/Dockerfile",
        "patchSetId": 14
      },
      "lineNbr": 18,
      "author": {
        "id": 6218
      },
      "writtenOn": "2021-03-29T12:41:11Z",
      "side": 1,
      "message": "Setting 777 recursively on all files in /opt is a bit excessive. All we really need is to add permission to execute the start script file. Please consider replacing with \n\n\u0026\u0026 find /opt/app/onap/command-executor -name \"*.sh\" -exec chmod +x {} \\;",
      "revId": "e2e3e0701fcd03ad352d622387055e2d5e1ec83b",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "545b6b81_366a82b6",
        "filename": "ms/command-executor/src/main/docker/Dockerfile",
        "patchSetId": 14
      },
      "lineNbr": 18,
      "author": {
        "id": 865
      },
      "writtenOn": "2021-03-29T13:29:23Z",
      "side": 1,
      "message": "I agree.. but I am not understanding one part even that when chown -R onap:onap /opt is being done so by default everything inside will be owned by ONAP user including the start.sh or other scripts too !\n\nDockerFile has USER onap at #23 and entry point running the start.sh, if I remove #18 still it #24 fails with permission issues, which shouldn\u0027t be case !\n\nThat\u0027s where I added 777 on /opt -\u003e as \n1) /opt contains project related files \n2) it creates new files or directories within some subfolder of /opt directory during runtime\n\nSo to avoid any issue during runtime, changing /opt directory permission helps !",
      "parentUuid": "9939fd40_d40bab08",
      "revId": "e2e3e0701fcd03ad352d622387055e2d5e1ec83b",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5522be9b_f294b5fb",
        "filename": "ms/command-executor/src/main/docker/Dockerfile",
        "patchSetId": 14
      },
      "lineNbr": 18,
      "author": {
        "id": 6218
      },
      "writtenOn": "2021-03-29T13:56:18Z",
      "side": 1,
      "message": "There is a difference between ownership and permission to execute. You can own a file and still not have permission to execute it. You do need to change permission for script files which need to be executed, but most other files only need read and write permissions.",
      "parentUuid": "545b6b81_366a82b6",
      "revId": "e2e3e0701fcd03ad352d622387055e2d5e1ec83b",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcb8b0e4_5bf807b3",
        "filename": "ms/command-executor/src/main/docker/Dockerfile",
        "patchSetId": 14
      },
      "lineNbr": 18,
      "author": {
        "id": 865
      },
      "writtenOn": "2021-03-29T14:29:15Z",
      "side": 1,
      "message": "I get it, and I can check directories are being created with default permissions as drwxr-xr-x (where onap user has access to) but start.sh file has permissions as -rw-r--r-- and that can be fixed by committing file with correct permissions (git update-index --chmod\u003d+x start.sh) .\n\nBut not only start.sh but other python scripts needs permissions too, so instead fixing permission in git for each file, there, I can have 755 on /opt instead of 777 as onap user owns /opt !",
      "parentUuid": "5522be9b_f294b5fb",
      "revId": "e2e3e0701fcd03ad352d622387055e2d5e1ec83b",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b9102078_24573ac1",
        "filename": "ms/command-executor/src/main/docker/Dockerfile",
        "patchSetId": 14
      },
      "lineNbr": 18,
      "author": {
        "id": 6218
      },
      "writtenOn": "2021-03-29T15:13:17Z",
      "side": 1,
      "message": "Are the python scripts executed from the shell? As long as python can read them it should be fine. Otherwise how did it work before?",
      "parentUuid": "fcb8b0e4_5bf807b3",
      "revId": "e2e3e0701fcd03ad352d622387055e2d5e1ec83b",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3233d51_04235d8d",
        "filename": "ms/command-executor/src/main/docker/Dockerfile",
        "patchSetId": 14
      },
      "lineNbr": 18,
      "author": {
        "id": 865
      },
      "writtenOn": "2021-03-29T15:16:56Z",
      "side": 1,
      "message": "by mentioning python scripts I meant to give an example, but there may be more to add !\nFor now, I don\u0027t think 755 is excessive as it gives user \u0027onap\u0027 full control on directory /opt, it owns!",
      "parentUuid": "b9102078_24573ac1",
      "revId": "e2e3e0701fcd03ad352d622387055e2d5e1ec83b",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}